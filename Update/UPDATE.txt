This includes preliminary changes for work and operation. I will merge the code later.
